/**
 * @category    Mana
 * @package     Mana_Content
 * @copyright   Copyright (c) http://www.manadev.com
 * @license     http://www.manadev.com/license  Proprietary License
 */
Mana.define("Mana/Content/Tree",["jquery","Mana/Core/Block"],function(n,e){return e.extend("Mana/Content/Tree",{})}),Mana.define("Mana/Content/Tree/Search",["jquery","Mana/Core/Block","singleton:Mana/Core/Layout","singleton:Mana/Core/Config"],function(n,e,t,a){return e.extend("Mana/Content/Tree/Search",{_init:function(){this._super()},_subscribeToHtmlEvents:function(){function n(){e.changed()}var e=this;return this._super().on("bind",this,function(){this.$field().on("blur",n)}).on("unbind",this,function(){this.$field().off("blur",n)})},$field:function(){return this.$().find("input")},$link:function(){return this.$().find("a")},$tree:function(){return t.getBlock("tree")},changed:function(){var n=a.getData("url.unfiltered");this.$field()[0].getValue().length>0&&(n+="?search="+this.$field()[0].getValue()),this.$link()[0].href=n}})}),Mana.define("Mana/Content/AjaxInterceptor",["jquery","singleton:Mana/Core/Ajax","singleton:Mana/Core/Config","singleton:Mana/Core/Layout"],function(n,e,t,a,r){return Mana.Object.extend("Mana/Content/AjaxInterceptor",{match:function(e,a){if(a){var r=t.getData("mana_content.ajax.containers");if(r&&n(r).has(a).length>0)return!0}return!1},intercept:function(n){var o=document.createElement("a"),i=!1;o.href=n,window._gaq!==r&&(window._gaq.push(["_setAccount",t.getData("ga.account")]),window._gaq.push(["_trackPageview",n.substring(o.protocol.length+o.hostname.length+2)])),window.ga!==r&&window.ga("send","pageview",{page:n.substring(o.protocol.length+o.hostname.length+2)});var u=n;n=decodeURIComponent(n);var c=u.indexOf("?"),s=n.indexOf("?");-1!=c&&-1!=s&&(n=n.substr(0,s)+"?"+u.substr(c+1));var g=t.getData("url.base");return g+=t.getData("mana_content.ajax.urlKey"),g+="/"+t.getData("ajax.currentRoute"),g+="/"+t.getData("mana_content.ajax.routeSeparator"),g+="/"+n.substr(t.getData("url.base").length),e.get(g,function(n){return e.update(n),a.getPageBlock().resize(),i=!0,!0},{preventClicks:!0,encode:-1!=s?{offset:0,length:s}:r}),i}})}),Mana.require(["jquery","singleton:Mana/Core/Ajax","singleton:Mana/Content/AjaxInterceptor"],function(n,e,t){e.addInterceptor(t)});