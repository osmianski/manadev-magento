/**
 * @category    Mana
 * @package     Mana_Content
 * @copyright   Copyright (c) http://www.manadev.com
 * @license     http://www.manadev.com/license  Proprietary License
 */
Mana.define("Mana/Content/Tree",["jquery","Mana/Core/Block"],function(n,t){return t.extend("Mana/Content/Tree",{setCustomContent:function(n){this.setContent(n)}})}),Mana.define("Mana/Content/Tree/Search",["jquery","Mana/Core/Block","singleton:Mana/Core/Layout","singleton:Mana/Core/Ajax","singleton:Mana/Core"],function(n,t,e,i,o){return t.extend("Mana/Content/Tree/Search",{_init:function(){this._super()},_subscribeToHtmlEvents:function(){function n(){t.changed()}var t=this;return this._super().on("bind",this,function(){this.$field().on("blur",n)}).on("unbind",this,function(){this.$field().off("blur",n)})},$field:function(){return this.$().find("input")},$tree:function(){return e.getBlock("tree")},changed:function(){var n=this,t={current_url:window.location.toString(),search:this.$field()[0].getValue()};i.post(this.$().attr("data-load-url"),t,function(t){o.isString(t)?n.$tree().setCustomContent(t):i.update(t)})}})});