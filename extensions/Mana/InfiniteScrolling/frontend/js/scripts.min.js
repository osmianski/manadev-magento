/**
 * @category    Mana
 * @package     Mana_InfiniteScrolling
 * @copyright   Copyright (c) http://www.manadev.com
 * @license     http://www.manadev.com/license  Proprietary License
 */
Mana.define("Mana/InfiniteScrolling/Engine",["jquery","Mana/Core/Block"],function(t,n){return n.extend("Mana/InfiniteScrolling/Engine",{_subscribeToHtmlEvents:function(){function t(){n.onScroll()}var n=this;return this._super().on("bind",this,function(){n.$scrollingArea().on("scroll",t)}).on("unbind",this,function(){n.$scrollingArea().off("scroll",t)})},getListSelector:function(){return this.$().data("list")},getListItemSelector:function(){return this.$().data("list-item")},getProductCount:function(){return this.$().data("product-count")},getPageSize:function(){return this.$().data("page-size")},$list:function(){return t(this.getListSelector())},$items:function(){return this.$list().find(this.getListItemSelector())},$loader:function(){return this.$().find("")},$scrollingArea:function(){return t(window)},getScrollingAreaBottom:function(){return t(window).scrollTop()+t(window).height()},getProductListBottom:function(){var t=this.$items().last();return t.offset().top+t.height()},getVisibleItemCount:function(){return this.$items().length},onScroll:function(){this.getScrollingAreaBottom()>=this.getProductListBottom()&&this.getVisibleItemCount()<this.getProductCount()}})});